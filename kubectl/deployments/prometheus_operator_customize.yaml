---

defaultRules:
  create: true
  rules:
    alertmanager: true
    etcd: true
    general: true
    k8s: true
    kubeApiserver: true
    kubePrometheusNodeAlerting: true
    kubePrometheusNodeRecording: true
    kubernetesAbsent: true
    kubernetesApps: true
    kubernetesResources: true
    kubernetesStorage: true
    kubernetesSystem: true
    kubeScheduler: true
    network: true
    node: true
    prometheus: true
    prometheusOperator: true
    time: true
  labels: {}
  annotations:
    priority: 'high'

kubeControllerManager:
  enabled: true
  serviceMonitor:
    https: false
    insecureSkipVerify: true
kubelet:
  enabled: true
  serviceMonitor:
    https: false
alertmanager:
  ingress:
    enabled: true
    annotations:
      kubernetes.io/ingress.class: nginx
      nginx.ingress.kubernetes.io/rewrite-target: /$2
    paths:
      - "/alertmanager(/|$)(.*)"
prometheus:
  prometheusSpec:
    externalUrl: 'https://s1.home.lab/prometheus/'
    routePrefix: '/prometheus'
  podDisruptionBudget:
    enabled: true
    minAvailable: 1
  ingress:
    enabled: true
    annotations:
    paths: 
      - "/prometheus(/|$)(.*)"
grafana:
  adminPassword: changeme
  grafana.ini:
    server:
      root_url: "%(protocol)s://%(domain)s:%(http_port)s/grafana/"
      enable_gzip: "true"
  ingress:
    enabled: true
    annotations:
      kubernetes.io/ingress.class: nginx
      nginx.ingress.kubernetes.io/rewrite-target: /$2
    path: "/grafana(/|$)(.*)"

additionalScrapeConfigs:
  name: additional-scrape-configs
  key: prometheus-additional.yaml
